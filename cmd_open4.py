from subprocess import Popen

print("=********************************************************************%--")
print(" =.                                                                   +-   ________________________")
print(" =.                                                                   +-   |                       |")
print(" =.              -*++*-    -:::.        .:::-   .::::::-.             +-   |       Программа       |")
print(" =.           -#########* -#####=      :#####:  -##########=.         +-   |  для автоматического  |")
print(" =.          *###*     :- -###=##*    .##%%##:  -###.   .=###-        +-   |       запуска         |")
print(" =.         .###*         -###.###.  .###.%##:  -###.     =##%        +-   |      пингования       |")
print(" =.         -###-         -### :###  =##: %##:  -###.     *###        +-   |        хостов         |")
print(" =.         .###*         -###  +##+*##=  %##:  -###.     =##%        +-   |                       |")
print(" =.          =###:     .. -###  .######.  %##:  -###.   .=###-        +-   |                       |")
print(" =.           +#########* -###   -####-   %##:  -##########%.         +-   |   Cmd-Ping v.0.0.2    | ")
print(" =.             .:+==+-.  .**:    -**-    :**.  .:*****:..            +-   |_______________________|")
print(" =.                                                                   +-")
print(" =.                                                                   +-")
print(" -:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::.")
# print("")
print("                   :===============================================================================*.")
print("                   *-                                                                             -+")
print("                   *-                                                                             -+")
print("                   *-                 %#######%-.  *####-    :##=     -%########:                 -+")
print(" ***********       *-                 %##+--*###%. +#####:   :##=   -####*-..:+#%.                -+")
print(" * tersero *       *-                 %##*   :###. +##+###*. :##=  -###:                          -+")
print(" *         *       *-                 %##*  .%##%. +##+.###+ :##=  =##=  .*+++++:                 -+")
print(" *  2022   *       *-                 %########+.  +##+ .###+:##=  %##=  .%#####%                 -+")
print(" ***********       *-                 %##*...      +##+  .###%##=  *###-.    *##%                 -+")
print("                   *-                 %##*         +##+   .#####=  .*####:...=##%                 -+")
print("                   *-                .%##*         +##+    .%###+    .*#########+                 -+")
print("                   *-                                                                             -+")
print("                   *-                                                                             -+")
print("                   **:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::*+")


print(100 * '-')
print('Программа для автоматического запуска пингования хостов')
while True:
    print(100 * '-')
    print('Введите последние цифры IP адреса компьютера или сервера,')
    print('в формате Y-XXX, где Y - номер подсети, а XXX - адрес узла,')
    last_digits = input('например: 0-100 (завершить - введите 0): ')
    if last_digits == '0':
        print(100 * '-')
        print('Программа завершена')
        break
    # elif last_digits == \d{1}[-]\d{3}:
    subnet = last_digits[:1]
    #print(subnet)
    last_ip = last_digits[2:]
    #print(last_ip)
    #print('Старт пинга хоста 192.168.1.' + last_digits)
    print(f'Старт пинга хоста 192.168.{subnet}.{last_ip}')
    full_ip = f'start ping -t 192.168.{subnet}.{last_ip}'
    # print(full_ip)
    p = Popen(full_ip, shell=True)

#  TODO: Сделать дополнительно чтобы выводилось DNS имя хоста после начала сканирования
#  TODO: Сделать проверку регулярными выражениями на плохой ввод ip типа 192.168.1.m
